{"ast":null,"code":"import _toConsumableArray from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/macbook-esuca/Downloads/workshop-react-autentia/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/macbook-esuca/Downloads/workshop-react-autentia/src/workshop-solution/contexts/CartContext.tsx\";\nimport React from \"react\";\nvar CartContext = React.createContext({\n  items: [],\n  quantity: 0,\n  updateItems: function updateItems() {\n    throw Error(\"update items not implemented\");\n  }\n});\n\nvar CartContextProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CartContextProvider, _React$Component);\n\n  function CartContextProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CartContextProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CartContextProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      items: []\n    };\n\n    _this.updateItems = function (item) {\n      var itemIndex = _this.state.items.findIndex(function (value) {\n        return value.id === item.id;\n      });\n\n      if (itemIndex > -1) {\n        _this.setState(function (prevState) {\n          var newItems = _toConsumableArray(prevState.items);\n\n          newItems[itemIndex].quantity = item.quantity;\n          return {\n            items: newItems\n          };\n        });\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            items: [].concat(_toConsumableArray(prevState.items), [item])\n          };\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CartContextProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CartContext.Provider, {\n        value: {\n          items: this.state.items,\n          quantity: this.state.items.reduce(function (previousValue, currentValue) {\n            return previousValue + currentValue.quantity;\n          }, 0),\n          updateItems: this.updateItems\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return CartContextProvider;\n}(React.Component);\n\nvar CartContextConsumer = CartContext.Consumer;\nexport { CartContextProvider, CartContextConsumer };","map":{"version":3,"sources":["/Users/macbook-esuca/Downloads/workshop-react-autentia/src/workshop-solution/contexts/CartContext.tsx"],"names":["React","CartContext","createContext","items","quantity","updateItems","Error","CartContextProvider","state","item","itemIndex","findIndex","value","id","setState","prevState","newItems","reduce","previousValue","currentValue","props","children","Component","CartContextConsumer","Consumer"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAaA,IAAMC,WAAW,GAAGD,KAAK,CAACE,aAAN,CAAkC;AACpDC,EAAAA,KAAK,EAAE,EAD6C;AAEpDC,EAAAA,QAAQ,EAAE,CAF0C;AAGpDC,EAAAA,WAAW,EAAE,uBAAM;AACjB,UAAMC,KAAK,CAAC,8BAAD,CAAX;AACD;AALmD,CAAlC,CAApB;;IAYMC,mB;;;;;;;;;;;;;;;;;UACJC,K,GAAgB;AACdL,MAAAA,KAAK,EAAE;AADO,K;;UAIhBE,W,GAAc,UAACI,IAAD,EAAoB;AAChC,UAAMC,SAAS,GAAG,MAAKF,KAAL,CAAWL,KAAX,CAAiBQ,SAAjB,CAA2B,UAAAC,KAAK;AAAA,eAAIA,KAAK,CAACC,EAAN,KAAaJ,IAAI,CAACI,EAAtB;AAAA,OAAhC,CAAlB;;AAEA,UAAIH,SAAS,GAAG,CAAC,CAAjB,EAAoB;AAClB,cAAKI,QAAL,CAAc,UAAAC,SAAS,EAAI;AACzB,cAAMC,QAAQ,sBAAOD,SAAS,CAACZ,KAAjB,CAAd;;AACAa,UAAAA,QAAQ,CAACN,SAAD,CAAR,CAAoBN,QAApB,GAA+BK,IAAI,CAACL,QAApC;AACA,iBAAO;AACLD,YAAAA,KAAK,EAAEa;AADF,WAAP;AAGD,SAND;AAOD,OARD,MAQO;AACL,cAAKF,QAAL,CAAc,UAAAC,SAAS;AAAA,iBAAK;AAC1BZ,YAAAA,KAAK,+BAAMY,SAAS,CAACZ,KAAhB,IAAuBM,IAAvB;AADqB,WAAL;AAAA,SAAvB;AAGD;AACF,K;;;;;;;6BAEQ;AACP,aACE,oBAAC,WAAD,CAAa,QAAb;AACE,QAAA,KAAK,EAAE;AACLN,UAAAA,KAAK,EAAE,KAAKK,KAAL,CAAWL,KADb;AAELC,UAAAA,QAAQ,EAAE,KAAKI,KAAL,CAAWL,KAAX,CAAiBc,MAAjB,CACR,UAACC,aAAD,EAAgBC,YAAhB;AAAA,mBACED,aAAa,GAAGC,YAAY,CAACf,QAD/B;AAAA,WADQ,EAGR,CAHQ,CAFL;AAOLC,UAAAA,WAAW,EAAE,KAAKA;AAPb,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWG,KAAKe,KAAL,CAAWC,QAXd,CADF;AAeD;;;;EAvC+BrB,KAAK,CAACsB,S;;AA0CxC,IAAMC,mBAAmB,GAAGtB,WAAW,CAACuB,QAAxC;AAEA,SAASjB,mBAAT,EAA8BgB,mBAA9B","sourcesContent":["import React from \"react\";\n\ninterface CartItem {\n  id: number;\n  quantity: number;\n}\n\ninterface ICartContext {\n  items: CartItem[];\n  quantity: number;\n  updateItems: (items: CartItem) => void;\n}\n\nconst CartContext = React.createContext<ICartContext>({\n  items: [],\n  quantity: 0,\n  updateItems: () => {\n    throw Error(\"update items not implemented\");\n  }\n});\n\ninterface IState {\n  items: CartItem[];\n}\n\nclass CartContextProvider extends React.Component<{}, IState> {\n  state: IState = {\n    items: []\n  };\n\n  updateItems = (item: CartItem) => {\n    const itemIndex = this.state.items.findIndex(value => value.id === item.id);\n\n    if (itemIndex > -1) {\n      this.setState(prevState => {\n        const newItems = [...prevState.items];\n        newItems[itemIndex].quantity = item.quantity;\n        return {\n          items: newItems\n        };\n      });\n    } else {\n      this.setState(prevState => ({\n        items: [...prevState.items, item]\n      }));\n    }\n  };\n\n  render() {\n    return (\n      <CartContext.Provider\n        value={{\n          items: this.state.items,\n          quantity: this.state.items.reduce(\n            (previousValue, currentValue) =>\n              previousValue + currentValue.quantity,\n            0\n          ),\n          updateItems: this.updateItems\n        }}\n      >\n        {this.props.children}\n      </CartContext.Provider>\n    );\n  }\n}\n\nconst CartContextConsumer = CartContext.Consumer;\n\nexport { CartContextProvider, CartContextConsumer };\n"]},"metadata":{},"sourceType":"module"}